{% extends "base_profile.html" %}
{% load static %}
{% load staticfiles i18n compress%}

{% block title %}Dashboard Home{% endblock %}

{% block css %}
{{block.super}}
{% compress css %}
    <!-- SASS -->
    <link type='text/scss' href="{% static 'sass/users/user_detail.scss' %}" rel="stylesheet">

  {% endcompress %}
{% endblock css %}

{% block breadcrumb %}
{{block.super}}
<span class='pull-right'>
  username: {{ object.username }}
  </span>
{% endblock %}


{% block content %}
<div class="container">

<!-- Action buttons -->
<div class="row top-row">
  <div class='col-sm-5 top-buttons'>
    <a class="btn btn-primary" href="{% url 'users:update' %}" role="button">My Info</a>
    <a class="btn btn-primary" href="{% url 'account_email' %}" role="button">E-Mail</a>
  </div>

  <div class='col-sm-2 current-balance'>
    <small>Current Balance</small>
    <h2>$24.66</h2>
    <a class='btn  btn-success btn-success' href='#'> Cash Out </a>
  </div>
  
  <div class='col-sm-5 shipment-button'>
    <a class="btn btn-danger " href="{% url 'shipments:shipmentOrder' %}" role="button">Create New Shipment</a>
  </div>

</div>
<!-- End Action buttons -->

<!--TEST -->
<hr>
<!-- END TEST -->

  <div class="row">
    <div class="col-sm-12">
          <!---shipment_set is the name generated automatically for the FK in play here of the USER -->
          {% for shipment in user_shipments %}
                    <div class="card card-nav-tabs vertical-align">
                        <div class="{% if shipment.item_set.exists %} header-info {% else %} header-grey {% endif %}">
                          <!-- colors: "header-primary", "header-info", "header-success", "header-warning", "header-danger" -->
                          <a class="btn btn-dark-blend" href="{% url 'shipments:shipmentDetail' shipment.id %}" role="button">
                              {{ shipment.name }}
                              <i class="material-icons">arrow_forward</i>
                              <div class="ripple-container"></div>
                          </a>
                            {% if shipment.is_physical %}
                                <span class="label label-warning pull-right" rel="tooltip" title="A ReuseRat agent picked up your items. Digital shipments are sent via USPS.">Physical</span>
                            {% endif %}
                        </div>

                        <div class="content">
                          <div class='col-sm-7'>
                            <h4>Description</h4>
                            <p>
                              {{ shipment.description }}
                            </p>
                          </div>
                          <div class='col-sm-5'>
                            <h4>Items For Sale</h4>
                                <table class="table">
                               {% for item in shipment.get_visible_items %}
                                    <tr>
                                        <td>{{item.name}}</td>
                                        <td><a href="{{ item.get_shopify_url }}" target="_blank">See On Store</a></td>
                                    </tr>
                                    {% empty %}
                                    <p>
                                       No items selling yet. If your shipment has arrived, your items will be processed soon.
                                    </p>
                              {% endfor %}
                                </table>

                          </div>
                        </div>
                    </div>
          {% empty %}
              <h3>No shipments yet! Please <a class="text-danger" href="{% url 'shipments:shipmentOrder' %}">create a new shipment</a> to get selling.</h3>

        {% endfor %}
    </div>
  </div>




</div>
{% endblock content %}

